# Telegram_link_Line
>ç”¨Telegramä¾†æ”¶ç™¼Lineçš„è¨Šæ¯ã€‚
>use telegram to Send and receive messages(from Line).
*****
èˆŠç‰ˆçš„åœ¨v1ã€v2åˆ†æ”¯ï¼Œæ­¤ç‚ºé‡å°v3çš„READMEã€‚    
å¦‚æœæ˜¯ Telegram_Bot æ–°æ‰‹æ¨è–¦çœ‹å®Œ [é€™å€‹å½±ç‰‡](https://youtu.be/On9yeMtG2Wg)å¾Œåœ¨ä¾†ä½¿ç”¨ã€‚    

å¦‚æœæƒ³è¦ç²å–æ›´æ–°ä¹‹è¨Šï¼Œå¯ä»¥åŠ å…¥é€™å€‹é »é“  https://t.me/TG_link_Line



| åŠŸèƒ½ | V1 | V2 | V3 |     
|-------|:----:|:-----:|:-----:|     
| æ–‡å­—      |  âœ“ |    âœ“     |   âœ“  |    
| è²¼åœ–      |     |            | åƒ…Lineç™¼çµ¦TG |      
| ç…§ç‰‡      |     | åƒ…TGç™¼çµ¦Line |    âœ“  |       
| å½±ç‰‡      |     |            |   âœ“  |      
| éŒ„éŸ³      |     |            | åƒ…Lineç™¼çµ¦TG |      
| ä½ç½®      |     |            |   âœ“  |      
| æª”æ¡ˆ      |     |            | åƒ…Lineç™¼çµ¦TG |      
| çŸ¥é“èª°ç™¼è¨€ |     |    âœ“      |   âœ“  |      
| é‡å°å›å¾©   |     |           |   âœ“  |      
| æˆ¿é–“åˆ†é¡   |     |    âœ“      |   âœ“  |      
| ç¨ç«‹æˆ¿é–“   |     |           |    âœ“  |      
* V2ã€V3æœ‰æ™‚æœƒä¸çŸ¥é“æ˜¯èª°ç™¼è¨€æ˜¯å› ç‚ºå°æ–¹[ç‰ˆæœ¬](https://goo.gl/noYa7L)ä¸å¤ æ–°ã€‚



# æº–å‚™
 ##### éœ€è¦ä½¿ç”¨è€…ç”³è«‹ Telegram_botè·ŸLine_bot(Developer Trial)

 ##### éœ€æœ‰ä¸€googleå¸³è™Ÿä¸¦åœ¨å…¶ä¸­å‰µå»ºï¼š


1.  ä¸€å€‹docæª”ï¼Œä¸¦å°‡v3ä¸­çš„"doc.gs"å…§å®¹è¤‡è£½ä¸Šå»ã€‚

2.  ä¸€å€‹sheetæª”
    * åœ¨sheetä¸­æ–°å¢5å€‹åˆ†é (page)ï¼š    
  __"Debug"ã€"Log"ã€"ç´€éŒ„ç™¼é€çš„è¨Šæ¯"ã€"Lineè¨Šæ¯å€"ã€"JSONå‚™ä»½"__   
    * å…¶ä¸­ "Lineè¨Šæ¯å€" åœ¨å…¶"A1"ä¸­å¡«å…¥0(æ•´æ•¸æ•¸å­—)ï¼Œç„¶å¾Œå°‡é™¤äº†ç¬¬1åˆ—çš„æ ¼å¼å…¨éƒ¨è¨­ç‚ºå­—ä¸²(ç´”æ–‡å­—)ã€‚      
    [èªªæ˜åœ–1](http://i.imgur.com/za6Ia6Q.png)ã€[èªªæ˜åœ–2](http://i.imgur.com/rj9vlR3.png)    


3.  äºŒå€‹gsæª”(google apps script)ï¼Œä¸¦å°‡v3å…¶ä¸­çš„"Telegram_link_Line.gs"çš„å…§å®¹è¤‡è£½åœ¨ä¸€é–‹å§‹çµ¦ä½ çš„"ç¨‹å¼ç¢¼"å€å…§ã€‚    
  ![Imgur](https://i.imgur.com/V3KF0rh.png)
  è¤‡è£½å®Œå¾ŒæŒ‰ä¸‹å·¦ä¸Šè§’çš„ __"æª”æ¡ˆ" -> "æ–°å¢" -> "æŒ‡ä»¤ç¢¼æª”æ¡ˆ" -> è¼¸å…¥ä½ è¦çš„åç¨± -> å°‡"baseANDtest"å…§å®¹è¤‡è£½ä¸Šå»ä¸¦å¡«ä¸Šè³‡è¨Š(è¨»ä¸€)__    
  ![Imgur](https://i.imgur.com/tt2F4cj.png)
  ----    
  ![Imgur](https://i.imgur.com/ySQ5jJO.png)
  ----    
  ![Imgur](https://i.imgur.com/MvEDdfk.png)
  ----    
  ![Imgur](https://i.imgur.com/WgT109q.png)
  ç„¶æˆå¾Œè«‹å¦‚ä¸‹æ“ä½œï¼š
    * æ¥ä¸‹ä¾†æŒ‰ä¸‹å·¦ä¸Šè§’çš„
    * "ç™¼ä½ˆ" ->
    * "éƒ¨å±¬ç‚ºç¶²è·¯æ‡‰ç”¨ç¨‹å¼" ->
    * (å°ˆæ¡ˆç‰ˆæœ¬ é¸"æ–°å¢") ->
    * (å°‡æ‡‰ç”¨ç¨‹å¼åŸ·è¡Œç‚º æ”¹æˆ"æˆ‘") ->
    * (å…·æœ‰æ‡‰ç”¨ç¨‹å¼å­˜å–çš„ä½¿ç”¨è€… æ”¹æˆ"ä»»ä½•äººç”šè‡³åŒ¿åä½¿ç”¨è€…") ->
    * ç¢ºå®š(oræ›´æ–°)(è¨»äºŒ) ->
    * å°‡ä»–çµ¦ä½ çš„ç¶²å€è¤‡è£½èµ·ä¾†ï¼Œä¸¦è¨­å®šTelegramå’ŒLineçš„bot Poståˆ°è©²ç¶²å€ã€‚(è¨»ä¸‰)
    * å°‡ CP() è¨­å®šè¨ˆæ™‚å™¨ æ¯6å°æ™‚ä¸€æ¬¡ (<-éå¿…è¦ï¼Œä»¥é˜²è¬ä¸€ç”¨ã€‚)(ç”¨ä¾†å‚™ä»½æ•´å€‹doc)    
    [èªªæ˜åœ–1](http://i.imgur.com/KGXuqhT.png)ã€[èªªæ˜åœ–2](http://i.imgur.com/GWpqmYH.png)ã€[èªªæ˜åœ–3](http://i.imgur.com/tP8HUgR.png)ã€[èªªæ˜åœ–4](http://i.imgur.com/HHs9qOH.png)
##### Telegram bot éœ€è¦æ–°å¢å››å€‹æŒ‡ä»¤ï¼š

       main - é–‹å•Ÿä¸»é¸å–®
       allread - å…¨éƒ¨å·²è®€
       debug - é‡ç”Ÿè³‡æ–™(botå£æ‰æ™‚ç”¨)(ä¸æœƒè®“æˆ¿é–“ä¸è¦‹)
       exit - é›¢é–‹å°è©±

  * è·Ÿ @BotFather å°è©±  ->    
  * ç„¶å¾Œ /mybots  ->    
  * é¸ä½ çš„bot  ->    
  * åœ¨é€²å» "edit Bot"  ->    
  * "edit commands"  ->    
  * è²¼ä¸Šä¸Šæ–¹æŒ‡ä»¤ä¸¦é€å‡º  ->    
  * å®Œæˆï¼    
  ps' /allreadã€/debugé€™å…©å€‹æŒ‡ä»¤ä¹Ÿå¯ä»¥ç§»åˆ°botçš„Aboutè£¡é¢     
----
- è¨»ä¸€

  docå’Œsheetçš„IDåœ¨ç¶²å€ä¸­ï¼Œä¾‹å¦‚ç¶²å€ï¼š
  https://docs.google.com/spreadsheets/d/1vp35X4AfgP2mGLib0PZQ0NLaw_Ur0PSD_0rjgbwOfx/edit#gid=0

  é‚£IDå°±æ˜¯"1vp35X4AfgP2mGLib0PZQ0NLaw_Ur0PSD_0rjgbwOfx"
  (ä»‹æ–¼"d/"è·Ÿ"/edit")    

  ä¸çŸ¥é“è‡ªå·±çš„Telegram IDå¯ä»¥åœ¨Telegramä¸­æ‰¾ @you_id_bot å•ã€‚    

  ç„¶å¾Œé—œæ–¼gsæ–‡ä»¶ä¸­ç¬¬7è¡Œçš„ "Line_id"ã€ç¬¬8è¡Œçš„ "CHANNEL_ACCESS_TOKEN"åœ¨å¦‚ä¸‹åœ–lineçš„å¾Œå°ä¸­ã€‚     
  ![Imgur](http://i.imgur.com/meQfSFm.jpg)


- è¨»äºŒ

  ç¬¬ä¸€æ¬¡æœƒè¦æ±‚æ¬Šé™ï¼ŒåŒæ„å°±å¥½ã€‚


- è¨»ä¸‰

  Telegramç”¨     
  ```html
  "https://api.telegram.org/bot<token>/setWebhook?url=<https://XXX>&max_connections=1"
  ```    
  (é€™å€‹æ ¼å¼("&lt;token&gt;"æ”¹æˆä½ çš„bot token è·Ÿ "url="å¾Œé¢æ¥gså°ˆæ¡ˆç¶²å€ ))    
  (è¨­å®šWebhookçš„æ–¹å¼å°±æ˜¯å°‡ä½ æ”¹å¥½çš„ç¶²å€ä¸Ÿåˆ°ä»»ä¸€ç€è¦½å™¨ä¸Šï¼Œä¸¦æŒ‰Enteré€å‡º)

  Lineå‰‡è¦åˆ°å¾Œå°æ”¹([é•·é€™æ¨£](http://i.imgur.com/k0pSRfR.png))


- NOTEï¼š    
    ä½ å¿…é ˆå…ˆè·Ÿä½ çš„æ©Ÿå™¨äººå°è©±éä»–æ‰èƒ½å‚³è¨Šæ¯çµ¦ä½ ã€‚      
    å¦‚æœ‰å‡ºç¾å•é¡Œè«‹è¨˜å¾—çœ‹ä¸€ä¸‹ sheet çš„ log !!!
- NOTE2ï¼š    
    ç¾åœ¨Lineä¼ºæœå™¨åœ¨ç¾¤çµ„ä¸­æœ‰æ™‚æœƒç™¼userID(é ˆå°æ–¹line appæ›´æ–°)    
    æ‰€ä»¥æœ‰äº›çŸ¥é“æ˜¯èª°èªªçš„ï¼Œæœ‰äº›ä¸çŸ¥é“ï¼Œæˆ‘ç¾åœ¨ä¹Ÿå¾ˆå›°æ“¾ã€‚
# Screenshot
![Imgur](https://i.imgur.com/n9vBs6V.png)
----
![Imgur](https://i.imgur.com/FDVa131.png)
----
![Imgur](https://i.imgur.com/vlcHMHT.png)

# docçš„jsonèªªæ˜

    {
        "data": [{
            "RoomId": "zzz",
            "Name": "(é€™å€‹æˆ¿é–“æ˜¯ç©ºçš„)â",
            "status": "normal",
            "Amount": 0,
            "Notice": false
        }],
        "mode": 0,
        "Notice": "æ­£å¸¸é€šçŸ¥",
        "opposite": {
            "RoomId": "zzz",
            "Name": "(é€™å€‹æˆ¿é–“æ˜¯ç©ºçš„)â"
        },
        "last": {
            "RoomId": "zzz",
            "Name": "zzz"
        },
        "Order": [0, 2, 1, 4, 3],
        "keyword": ["mi", "bot"],
        "RoomKeyboard": [
            [{
                "text": "ğŸ”­ è¨Šæ¯ç‹€æ…‹"
            }],
            [{
                "text": "(é€™å€‹æˆ¿é–“æ˜¯ç©ºçš„)â"
            }]
        ],
        "FastMatch": {
            "(é€™å€‹æˆ¿é–“æ˜¯ç©ºçš„)â": 0
        },
        "FastMatch2": {
            "zzz": 0
        },
        "TG_control_bot_updateID": 610460242,
        "TG_bot_updateID_array": [{
            "update_id": 873054250,
            "TG_token": "437876669:AAE4bwnipQZiKdJEO9LndVdAqH76I0__ito",
            "line_roomID": "U9d16309b78be9a02acf3bcfb06b28df3",
            "Room_Name": "æ°¸æ ¼å¤©@æå­Ÿå“²âœ…"
        }, {
            "update_id": 488717600,
            "TG_token": "394777564:AAE9M7-e9vq74sfsByMg9RaIBdO4NYYwfQ4",
            "line_roomID": "C56858d2726373c094e030152171b2e23",
            "Room_Name": "åƒé£¯åœ˜âœ…"
        }, {
            "update_id": 444300614,
            "TG_token": "437876669:AAE4bwnipQZiKdJEO9LndVdAqH76I0__ito",
            "line_roomID": "Ua117f5dc6861315c9f7a0184c1ff4154",
            "Room_Name": "XXAç­âœ…"
        }]
    }

data = å­˜æ”¾æˆ¿é–“è³‡è¨Š

mode = æš«å­˜æŒ‡ä»¤(é€šå¸¸ç‚º0)

Notice = ç®¡ç†æ•´é«”é€šçŸ¥(ä½†å¯èƒ½å»¢é™¤)(æœªä½œç”¨)

opposite = æš«å­˜æŒ‡ä»¤å°è±¡æˆ¿é–“

last = ä¾†è‡ªLineç«¯çš„æœ€å¾Œè¨Šæ¯æˆ¿é–“(æœªä½œç”¨)

Order = é è¨ˆç”¨ä¾†åšè‡ªå‹•ä¾æ™‚é–“æ’åºæˆ¿é–“(æœªä½œç”¨)

keyword = é—œéµå­—è¨­å®šï¼Œå‡ºç¾é—œéµå­—è‡ªå‹•é€šçŸ¥(æœªä½œç”¨)

RoomKeyboard = æˆ¿é–“çš„keyboardï¼Œç‚ºç¯€çœé‡ç”Ÿæ™‚é–“è€Œç”Ÿ

FastMatch = å¿«é€Ÿç´¢å¼•ç”¨

FastMatch2 = å¿«é€Ÿç´¢å¼•ç”¨

TG_control_bot_updateID =
å› ç‚ºç¾åœ¨æ˜¯å¤šå€‹botå°åŒä¸€å€‹ç¨‹å¼post(ç¨ç«‹æˆ¿é–“åŠŸèƒ½)ï¼Œæ‰€ä»¥è¦çŸ¥é“å“ªå€‹botæ˜¯ä¸»æ§bot(ä¸­æ§å°çš„æ¦‚å¿µ)

TG_bot_updateID_array =
æœ‰é€£ç·šçš„bot(ç¨ç«‹æˆ¿é–“)

# ç‰ˆæœ¬è³‡è¨Š
  2017/09/28 - V3åˆæ¬¡ç™¼å¸ƒ!

# Author
æ°¸æ ¼å¤©
